name: Dev Release

on:
  push:
    branches:
      - main

permissions:
  actions: write
  contents: write

jobs:
    test:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout Actions
          uses: actions/checkout@v3
          with:
            fetch-depth: 0
        - name: Show Tree
          run: |
            pwd
            tree
#   dev-release:
#     uses: ./.github/workflows/terraform.yml
#     with:
#       environment: dev
#     secrets:
#       inherit

#   approve-prod-deploy:
#     environment: prod
#     runs-on: ubuntu-latest
#     permissions:
#       contents: write
#       actions: write
#     needs: [dev-release]
#     steps:
#       - run: echo "Prod Deployment Approved"

#       - name: Checkout Actions
#         uses: actions/checkout@v3
#         with:
#           fetch-depth: 0

#       - name: Tag Prod Commit
#         id: tag-prod
#         uses: ./.github/actions/tag-commit
#         with:
#           tag-prefix: Prod-Release

#       - name: Trigger Prod Workflow
#         uses: actions/github-script@v6
#         if: github.ref == 'refs/heads/main'
#         with:
#           script: |
#             github.rest.actions.createWorkflowDispatch({
#               owner: context.repo.owner,
#               repo: context.repo.repo,
#               workflow_id: 'prod-release.yml',
#               ref: '${{ steps.tag-prod.outputs.tag}}',
#             })